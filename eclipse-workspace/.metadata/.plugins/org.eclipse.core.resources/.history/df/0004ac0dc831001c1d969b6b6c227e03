package assignment1;

import java.util.Scanner;

import assignment1.Exceptions.InvalidMoveException;

public class HumanAgent extends Agent {

    public HumanAgent(Board board) {
        super(board);
    }

    /**
     * Asks the human for a move with from and to coordinates and makes sure its valid.
     * Create a Move object with the chosen fromCell and toCell
     * @return the valid human inputted Move
     */
    @Override
    public Move getMove() { // TODO
    	int fromRow, fromCol, toRow, toCol;
    	Cell fromCell, toCell;
    	Move newMove, validMove = null;
    	Boolean flag = true;
    	
    	while (flag) {
    		Scanner scanner = new Scanner(System.in);
    		System.out.print("Please input your fromCell (e.g. colraw, E2): ");
    		String from = scanner.next();
    		System.out.print("Please input your toCell (e.g. colraw, E2): ");
    		String to = scanner.next();
    		try {
    			fromCol = Utils.convertCharToInt(from.charAt(0));
    			fromRow = Utils.convertCharIntToInt(from.charAt(1));
    			toCol = Utils.convertCharToInt(to.charAt(0));
    			toRow = Utils.convertCharIntToInt(to.charAt(1));
    			fromCell = board.getCell(new Coordinate(fromRow, fromCol));
    			toCell = board.getCell(new Coordinate(toRow, toCol));
    			newMove = new Move(fromCell, toCell);
    			if (board.isValidMove(newMove)) {
    				validMove = newMove;
    				flag = false;
    			} else {
    				System.out.println("Not an Invalid Move, try again.");
    			}
    		} catch (InvalidMoveException e) {
    			System.out.println("Not an Invalid Move, try again.");
    		}
    		
    	}
		return validMove;
    }
    
    // TODO remove this before submit
    public static void main(String[] args) {
		HumanAgent h = new HumanAgent(new Board());
		System.out.println(h.getMove());
	}
    
}
